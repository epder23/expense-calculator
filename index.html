<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Smart Expense Calculator</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body class="bg-body-secondary">
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
      <div class="container">
        <a class="navbar-brand fw-bold text-primary d-flex align-items-center gap-2" href="#top">
          <span class="brand-flag" id="brand-flag">ðŸ‡ºðŸ‡¸</span>
          <div class="d-inline-flex flex-column lh-1">
            <span>Expense Suite</span>
            <small class="text-muted fw-semibold" id="brand-country-name">United States</small>
          </div>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#mainNav"
          aria-controls="mainNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end gap-3" id="mainNav">
          <ul class="navbar-nav align-items-lg-center me-lg-3">
            <li class="nav-item">
              <a class="nav-link" href="#stat-cards">Dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#filters">Filters</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#ledger">Timeline</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#calculator">Quick Calculator</a>
            </li>
          </ul>
          <div class="d-flex align-items-center gap-2 flex-nowrap nav-actions">
            <select
              id="nav-country"
              class="form-select form-select-sm nav-country-select"
              aria-label="Select preferred country"
            >
              <option value="">Select country</option>
            </select>
            <button class="btn btn-primary" id="nav-add-expense">
              <i class="bi bi-plus-lg me-1"></i>Add Expense
            </button>
          </div>
        </div>
      </div>
    </nav>

    <header class="py-4 bg-primary text-white shadow-sm mb-4" id="top">
      <div class="container d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3">
        <div>
          <p class="text-uppercase small mb-1 fw-semibold opacity-75">
            Personal Finance Toolkit
          </p>
          <h1 class="display-6 fw-bold mb-0">Smart Expense Calculator</h1>
          <p class="lead mb-0 opacity-75" id="hero-region">
            Tailored insights for <span class="fw-semibold" id="hero-country">United States</span>
          </p>
        </div>
        <div class="d-flex gap-2">
          <button id="btn-export" class="btn btn-light text-primary fw-semibold">
            <i class="bi bi-download me-1"></i>Export CSV
          </button>
          <button id="btn-clear-all" class="btn btn-outline-light">
            <i class="bi bi-trash3 me-1"></i>Clear All
          </button>
        </div>
      </div>
    </header>

    <main class="container pb-5">
      <section class="row g-4 mb-4" id="stat-cards">
        <article class="col-md-4">
          <div class="card shadow-sm border-0 h-100 stat-card">
            <div class="card-body">
              <p class="mb-1 text-uppercase small text-muted fw-semibold">
                Total Spent
              </p>
              <h2 class="fw-bold" id="stat-total">$0.00</h2>
              <p class="text-muted small mb-0">
                Tracks all expenses in the filtered view.
              </p>
            </div>
          </div>
        </article>
        <article class="col-md-4">
          <div class="card shadow-sm border-0 h-100 stat-card">
            <div class="card-body">
              <p class="mb-1 text-uppercase small text-muted fw-semibold">
                Average Per Expense
              </p>
              <h2 class="fw-bold" id="stat-average">$0.00</h2>
              <p class="text-muted small mb-0">
                Gives a quick idea of typical spending.
              </p>
            </div>
          </div>
        </article>
        <article class="col-md-4">
          <div class="card shadow-sm border-0 h-100 stat-card">
            <div class="card-body">
              <p class="mb-1 text-uppercase small text-muted fw-semibold">
                Largest Expense
              </p>
              <h2 class="fw-bold" id="stat-largest">$0.00</h2>
              <p class="text-muted small mb-0">
                Spot significant transactions instantly.
              </p>
            </div>
          </div>
        </article>
      </section>

      <section class="row g-4 mb-4" id="filters">
        <div class="col-lg-5">
          <div class="card shadow-sm border-0">
            <div class="card-body">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <p class="text-uppercase small fw-semibold text-muted mb-0">
                    Add / Edit Expense
                  </p>
                  <h2 class="h4 fw-bold">Expense Form</h2>
                </div>
                
              </div>

              <form id="expense-form" class="mt-3 needs-validation" novalidate>
                <div class="mb-3">
                  <label for="description" class="form-label">Description</label>
                  <input
                    type="text"
                    id="description"
                    class="form-control"
                    placeholder="e.g. Coffee with client"
                    required
                  />
                  <div class="invalid-feedback">Description is required.</div>
                </div>

                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="amount" class="form-label">
                      Amount (<span id="amount-currency-code">USD</span>)
                    </label>
                    <input
                      type="number"
                      id="amount"
                      class="form-control"
                      min="0"
                      step="0.01"
                      placeholder="0.00"
                      required
                    />
                    <div class="invalid-feedback">Enter a valid amount.</div>
                  </div>
                  <div class="col-md-6">
                    <label for="date" class="form-label">Date</label>
                    <input type="date" id="date" class="form-control" required />
                    <div class="invalid-feedback">Select a date.</div>
                  </div>
                </div>

                <div class="row g-3 mt-0 mt-md-2">
                  <div class="col-md-6">
                    <label for="category" class="form-label">Category</label>
                    <select id="category" class="form-select" required>
                      <option value="" disabled selected>Select category</option>
                      <option value="Housing">Housing</option>
                      <option value="Transportation">Transportation</option>
                      <option value="Food">Food & Dining</option>
                      <option value="Utilities">Utilities</option>
                      <option value="Health">Health & Fitness</option>
                      <option value="Shopping">Shopping</option>
                      <option value="Entertainment">Entertainment</option>
                      <option value="Travel">Travel</option>
                      <option value="Education">Education</option>
                      <option value="Savings">Savings</option>
                      <option value="Other">Other</option>
                    </select>
                    <div class="invalid-feedback">Pick a category.</div>
                  </div>
                  <div class="col-md-6">
                    <label for="payment-method" class="form-label">Payment Method</label>
                    <select id="payment-method" class="form-select" required>
                      <option value="" disabled selected>Choose method</option>
                      <option value="Cash">Cash</option>
                      <option value="Debit Card">Debit Card</option>
                      <option value="Credit Card">Credit Card</option>
                      <option value="Online Transfer">Online Transfer</option>
                      <option value="Wallet">Digital Wallet</option>
                    </select>
                    <div class="invalid-feedback">Pick a payment method.</div>
                  </div>
                </div>

                <div class="mt-3">
                  <label for="notes" class="form-label">Notes (optional)</label>
                  <textarea
                    id="notes"
                    class="form-control"
                    rows="2"
                    placeholder="Add context or reminders"
                  ></textarea>
                </div>

                <div class="d-flex gap-3 flex-wrap mt-4">
                  <button type="submit" class="btn btn-primary flex-grow-1">
                    <i class="bi bi-plus-circle me-1"></i>
                    <span id="submit-label">Add Expense</span>
                  </button>
                  <button type="reset" class="btn btn-outline-secondary flex-grow-1">
                    Reset Form
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <div class="col-lg-7">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
              <div class="d-flex flex-column flex-lg-row gap-3 align-items-lg-center justify-content-between mb-4">
                <div>
                  <p class="text-uppercase small fw-semibold text-muted mb-0">
                    Refine Results
                  </p>
                  <h2 class="h4 fw-bold mb-0">Filters</h2>
                </div>
                <button id="btn-clear-filters" class="btn btn-sm btn-outline-secondary">
                  Clear Filters
                </button>
              </div>

              <form class="row gy-3 gx-3" id="filter-form">
                <div class="col-md-6">
                  <label for="filter-search" class="form-label">Search</label>
                  <input
                    type="search"
                    id="filter-search"
                    class="form-control"
                    placeholder="Search description or notes"
                  />
                </div>
                <div class="col-md-6">
                  <label for="filter-category" class="form-label">Category</label>
                  <select id="filter-category" class="form-select">
                    <option value="">All Categories</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="filter-start" class="form-label">From Date</label>
                  <input type="date" id="filter-start" class="form-control" />
                </div>
                <div class="col-md-6">
                  <label for="filter-end" class="form-label">To Date</label>
                  <input type="date" id="filter-end" class="form-control" />
                </div>
                <div class="col-md-6">
                  <label for="filter-payment" class="form-label">Payment Method</label>
                  <select id="filter-payment" class="form-select">
                    <option value="">All</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="filter-sort" class="form-label">Sort By</label>
                  <select id="filter-sort" class="form-select">
                    <option value="date-desc">Date â†“</option>
                    <option value="date-asc">Date â†‘</option>
                    <option value="amount-desc">Amount â†“</option>
                    <option value="amount-asc">Amount â†‘</option>
                  </select>
                </div>
              </form>
            </div>
          </div>
        </div>
      </section>

      <section class="row g-4" id="ledger">
        <div class="col-12">
          <div class="card shadow-sm border-0">
            <div class="card-body">
              <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3 mb-3">
                <div>
                  <p class="text-uppercase small fw-semibold text-muted mb-0">
                    Ledger
                  </p>
                  <h2 class="h4 fw-bold mb-0">Expense Timeline</h2>
                </div>
                <div class="text-muted small">
                  <span class="me-3">
                    <i class="bi bi-circle-fill text-success me-1"></i> Income
                  </span>
                  <span>
                    <i class="bi bi-circle-fill text-danger me-1"></i> Expense
                  </span>
                </div>
              </div>

              <div class="table-responsive">
                <table class="table align-middle">
                  <thead class="table-light">
                    <tr>
                      <th>#</th>
                      <th>Description</th>
                      <th>Category</th>
                      <th>Payment</th>
                      <th>Amount</th>
                      <th>Date</th>
                      <th>Notes</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody id="expense-table-body">
                    <tr>
                      <td colspan="8" class="text-center text-muted py-4">
                        Start tracking expenses to see them listed here.
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
              <p class="text-uppercase small fw-semibold text-muted mb-1">
                Insights
              </p>
              <h2 class="h4 fw-bold mb-3">Categories Breakdown</h2>
              <div id="category-breakdown" class="d-flex flex-column gap-2">
                <p class="text-muted mb-0">No data yet.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
              <p class="text-uppercase small fw-semibold text-muted mb-1">
                Tips
              </p>
              <h2 class="h4 fw-bold mb-3">Spending Health</h2>
              <ul class="list-unstyled mb-0" id="spending-health">
                <li class="text-muted">Add expenses to see personalized tips.</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section class="row g-4 mt-0" id="calculator">
        <div class="col-lg-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
              <p class="text-uppercase small fw-semibold text-muted mb-1">
                Quick Math
              </p>
              <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between">
                <h2 class="h4 fw-bold mb-0">Budget Calculator</h2>
                <small class="text-muted">Perfect for rapid what-if checks.</small>
              </div>
              <div class="calculator mt-3">
                <input
                  type="text"
                  id="calc-display"
                  class="form-control form-control-lg text-end mb-3"
                  placeholder="0"
                  value="0"
                  readonly
                />
                <div class="calculator-grid">
                  <button class="calc-btn btn btn-light" data-action="clear">AC</button>
                  <button class="calc-btn btn btn-light" data-action="delete">DEL</button>
                  <button class="calc-btn btn btn-light" data-value="%">%</button>
                  <button class="calc-btn btn btn-outline-primary" data-value="/">Ã·</button>

                  <button class="calc-btn btn btn-light" data-value="7">7</button>
                  <button class="calc-btn btn btn-light" data-value="8">8</button>
                  <button class="calc-btn btn btn-light" data-value="9">9</button>
                  <button class="calc-btn btn btn-outline-primary" data-value="*">Ã—</button>

                  <button class="calc-btn btn btn-light" data-value="4">4</button>
                  <button class="calc-btn btn btn-light" data-value="5">5</button>
                  <button class="calc-btn btn btn-light" data-value="6">6</button>
                  <button class="calc-btn btn btn-outline-primary" data-value="-">âˆ’</button>

                  <button class="calc-btn btn btn-light" data-value="1">1</button>
                  <button class="calc-btn btn btn-light" data-value="2">2</button>
                  <button class="calc-btn btn btn-light" data-value="3">3</button>
                  <button class="calc-btn btn btn-outline-primary" data-value="+">+</button>

                  <button class="calc-btn btn btn-light span-2" data-value="0">0</button>
                  <button class="calc-btn btn btn-light" data-value=".">.</button>
                  <button class="calc-btn btn btn-primary" data-action="equals">=</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
              <p class="text-uppercase small fw-semibold text-muted mb-1">
                Tips
              </p>
              <h2 class="h4 fw-bold mb-3">How to use</h2>
              <ul class="list-group list-group-flush">
                <li class="list-group-item">
                  Plot upcoming bills vs. savings; use the calculator to check affordability before logging an expense.
                </li>
                <li class="list-group-item">
                  Mix operators freely; the calculator supports decimal math and percentage shortcuts.
                </li>
                <li class="list-group-item">
                  Click `AC` for a full reset or `DEL` to remove the last digit without clearing the entire expression.
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="py-4 mt-5 text-center text-muted">
      <small>
        Built by Hisham. Data stored locally in your browser.
      </small>
    </footer>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="./app.js"></script>
  </body>
</html>

